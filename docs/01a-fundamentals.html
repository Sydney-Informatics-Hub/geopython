<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>01a-fundamentals.utf8.md</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="lesson.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 41px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h2 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h3 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h4 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h5 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h6 {
  padding-top: 46px;
  margin-top: -46px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->



<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Setup
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="setup.html">Setup</a>
    </li>
    <li>
      <a href="AWSinstuctionsStudents.html">AWS Backup instructions</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Session 1
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="00-intro.html">Introduction</a>
    </li>
    <li>
      <a href="01a-fundamentals.html">Fundamentals</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Session 2
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01b-dataframes.html">Useful Python packages for different data types</a>
    </li>
    <li>
      <a href="02a-mapping.html">Mapping with Cartopy</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Session 3
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="03a-MachineLearning.html">Machine Learning</a>
    </li>
    <li>
      <a href="03b-DeepLearningTS.html">Deep Learning &amp; Time Series</a>
    </li>
    <li>
      <a href="02b-Clustering.html">Numerical approaches</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Session 4
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="04a-SimpleSpeedUps.html">Simple Speed Ups</a>
    </li>
    <li>
      <a href="04b-DaskDataframes.html">Dask data frames</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<div id="python-fundamentals" class="section level1">
<h1>Python fundamentals</h1>
<div id="questions" class="section level3 questions">
<h3>Questions</h3>
<ul>
<li>What can Python do?</li>
<li>How do I do it?</li>
</ul>
</div>
<div id="objectives" class="section level3 objectives">
<h3>Objectives</h3>
<ul>
<li>Learn the basic Python commands</li>
</ul>
</div>
<p>Generally, cells like this are what to type into your Python shell/notebook/colab:</p>
<pre class="python"><code>2+4*10</code></pre>
<pre><code>42</code></pre>
<p>Cells like the above are the expected output.</p>
<p>Look at that, your first Python code! Who knew Python is just a big ol’ calculator! But it can do so much more…</p>
<pre class="python"><code>#This is a comment. This is for a human to read (so you remember what your code does!)
#Python ignores anything behind the &#39;#&#39;.

#The next line is an example of a &#39;variable&#39;. Assign values using a single &#39;=&#39; sign.
timeStart=145</code></pre>
<p>Note: A variable (e.g. timeStart) must start with a letter or underscore, and can include a number</p>
<pre class="python"><code>#Now you can use that variable in different ways.... firstly print it out to the screen
print(&quot;The age of the sample is&quot;, timeStart, &quot; Million years&quot;)</code></pre>
<pre><code>The age of the sample is 145  Million years</code></pre>
<pre class="python"><code>#Make a new variable called &#39;endtime&#39; and add a constant to our &#39;timeStart&#39; variable
endtime=timeStart+56</code></pre>
<p>Nothing printed out above? Good. Jupyter Notebooks won’t always do that so let’s tell Python to print it.</p>
<pre class="python"><code>print(endtime)</code></pre>
<pre><code>201</code></pre>
<pre class="python"><code>#Make a new &#39;string&#39; variable
geological_age=&#39;Jurassic&#39;

#Print out some useful information that includes our different variables
print(&quot;My sample is &quot;, endtime, &quot; Million years old, from the&quot;, geological_age, &quot; age.&quot;)</code></pre>
<pre><code>My sample is  201  Million years old, from the Jurassic  age.</code></pre>
<pre class="python"><code>#Make a Python List object, similar to an array.
times=[1,4.5,5+3.2,geological_age,&quot;Another string&quot;,True]

print(times)

#There are many different types of data types and objects: 
#int, long, float, complex, NaN, logical, String, Lists, Tuple, Dictionary, functions, classes, etc</code></pre>
<pre><code>[1, 4.5, 8.2, &#39;Jurassic&#39;, &#39;Another string&#39;, True]</code></pre>
<pre class="python"><code>#indexing
print(times[0])
print(times[4])
print(times[4][0])</code></pre>
<pre><code>1
Another string
A</code></pre>
<div id="functions" class="section level3">
<h3>Functions</h3>
<p>These are bits of code you want to perhaps use many times, or keep self contained, or refer to at different points. They can take values as input and give values back (or not).</p>
<pre class="python"><code>#Declare the name of the function
def add_numbers(x,y):
    &#39;&#39;&#39;adds two numbers
    usage: myaddition=addnumbers(x,y)
    returns: z
    inputs: x,y
    x and y are two integers
    z is the summation of x and y
    &#39;&#39;&#39;
    
    z=x+y
    
    return(z)</code></pre>
<p><strong>Note the indentation</strong> - Python forces your code to be nicely readable by using ‘whitespace’/indentation to signify what chunks of code are related. You will see this more later, but generally you should try and write readable code and follow <a href="https://www.python.org/dev/peps/pep-0008/">style standards</a></p>
<p>Many functions have a header - formatted as a multiline comment with three ’’’. This hopefully will tell you about the function</p>
<p>Anyway, let’s run our function, now that we have initialised it!</p>
<pre class="python"><code>add_numbers(1,2)</code></pre>
<pre><code>3</code></pre>
<div class="challenge">
</div>
<div id="challenge" class="section level3">
<h3>Challenge</h3>
<p>Write a function to convert map scale. For example, on a 1:25,000 map (good for hiking!) the distance between two points is 15 cm. How far apart are these in real life? (3750 m).</p>
<p>[Reminder: 15 cm * 25000 = 375000 cm = 3750 m]</p>
<p>Your function should take as input two numbers: the distance on the map (in cm) and the second number of the scale and, i.e. <code>calculate_distance(15, 25000)</code> should return 375000</p>
<details>
<summary>
Solution
</summary>
<pre class="python"><code>#Declare the name of the function
def calculate_distance(distance_cm,scale):
    &#39;&#39;&#39;calculates distance based on map and scale
    returns: z
    inputs: distance_cm,scale
    distance_cm and scale are two integers
    returns the product of distance_cm and scale
    &#39;&#39;&#39;  
    
    return(distance_cm * scale)</code></pre>
</div>
<div id="loops-operators-conditions" class="section level3">
<h3>Loops, operators, conditions</h3>
<p>Python is great for doing something a million times. It can be useful if you have many samples/data points and you want to operate or manipulate those points.</p>
<pre class="python"><code>#Loop through our list &#39;times&#39; that we defined above
for mything in times:
    print(mything)</code></pre>
<pre><code>1
4.5
8.2
Jurassic
Another string
True</code></pre>
<p>Sometimes you need to loop through a list, but simultaneously keep track of which index you’re up to.</p>
<pre class="python"><code>for myindex, mything in enumerate(times):
    print(&quot;index:&quot;,myindex,&quot; The thing in my &#39;times&#39; list:&quot;,mything)</code></pre>
<pre><code>index: 0  The thing in my &#39;times&#39; list: 1
index: 1  The thing in my &#39;times&#39; list: 4.5
index: 2  The thing in my &#39;times&#39; list: 8.2
index: 3  The thing in my &#39;times&#39; list: Jurassic
index: 4  The thing in my &#39;times&#39; list: Another string
index: 5  The thing in my &#39;times&#39; list: True</code></pre>
<p>You don’t always need a pre-defined list</p>
<pre class="python"><code>age=140
# What is the value of &quot;timeStart&quot; ?
# age &lt; timeStart is a &quot;logical&quot; data-type. It&#39;s either True or False
while age &lt; timeStart:
    print(&quot;time:&quot;, timeStart, &quot; age:&quot;, age, &quot; difference:&quot;,timeStart-age)
    #Increment the age variable
    age=age+1</code></pre>
<pre><code>time: 145  age: 140  difference: 5
time: 145  age: 141  difference: 4
time: 145  age: 142  difference: 3
time: 145  age: 143  difference: 2
time: 145  age: 144  difference: 1</code></pre>
</div>
<div id="control-statements" class="section level3">
<h3>Control statements</h3>
<p>Control statements include the functions <code>if</code>, <code>for</code>, <code>while</code>, <code>try</code>.</p>
<pre class="python"><code>#Control statements: if, for, while, try, 
if timeStart &lt; 200:
    print(timeStart)</code></pre>
<pre><code>145</code></pre>
<pre class="python"><code>if timeStart &lt;= 200:
    print(geological_age)
elif timeStart &gt; 200:
    print(&quot;Triassic age&quot;)
else:
    pass #This option is not necessarily needed, but can be useful in some scenarios</code></pre>
<pre><code>Jurassic</code></pre>
<pre class="python"><code>#Another function
def timescale(t):
    print(t)
    if (t &lt;= 4500) &amp; (t &gt; 2500):
        return(&quot;Archean&quot;)

    elif (t &lt;=2500) &amp; (t &gt; 541):
        return(&quot;Proterozoic&quot;)

    elif (t &lt;= 541) &amp; (t &gt; 252):
        return(&quot;Palaeozoic&quot;)

    elif (t &lt;=252) &amp; (t &gt; 65):
        return(&quot;Palaeozoic&quot;)

    elif (t &lt;=65) &amp; (t &gt;= 0):
        return(&quot;Cenozoic&quot;)

    else:
        print (&quot;Expect number between 0 and 4500, got:&quot;,t)
        return(float(&#39;nan&#39;))
    
timescale(1)</code></pre>
<pre><code>1





&#39;Cenozoic&#39;</code></pre>
<p>That is the basics. Now we are going to load in some data and manipulate it.</p>
</div>
</div>
<div id="dealing-with-data" class="section level1">
<h1>Dealing with data</h1>
<pre class="python"><code>#First we have to load some modules to do the work for us.
#Modules are packages people have written so we do not have to re-invent everything!

#The first is NUMerical PYthon. A very popular matrix, math, array and data manipulation library.
import numpy

#This is a library for making figures (originally based off Matlab plotting routines)
#We use the alias &#39;plt&#39; because we don&#39;t want to type out the whole name every time we reference it!
import matplotlib.pyplot as plt </code></pre>
<pre class="python"><code>#Set the variable name for the file we are loading in. 
#It is in the &#39;data&#39; directory, and the file is called EarthChemCU.txt. 
#We are currently working in /notebooks.
filename = &#39;../data/EarthChemCU.txt&#39;

#Now read in the data
# loadtxt() is a function that we can now use because we loaded the library called numpy
chemdata=numpy.loadtxt(filename, delimiter=&#39;,&#39;)
#chemdata &lt;- the name of a variable we are making that will hold the table of data
#filename &lt;- this is the name of the variable we declared above
#delimiter &lt;- this is a csv file</code></pre>
<div id="alternative-instructions-if-you-are-using-google-colab" class="section level4">
<h4>Alternative instructions if you are using Google Colab</h4>
<p>If you are using Google Colab, the data will not be stored on your system - but you can load it in from a url. Replace the above cell with the following commands:</p>
<pre class="python"><code>import urllib.request
chemdata=numpy.loadtxt(urllib.request.urlopen(&quot;https://cloudstor.aarnet.edu.au/plus/s/EaZN6DNLvpXfV1o/download&quot;), delimiter=&#39;,&#39;)</code></pre>
</div>
<div id="want-more-details-about-a-commandfunction-we-use" class="section level3">
<h3>Want more details about a command/function we use?</h3>
<pre class="python"><code>#Try this help command
help(numpy.loadtxt)</code></pre>
<pre><code>Help on function loadtxt in module numpy:

loadtxt(fname, dtype=&lt;class &#39;float&#39;&gt;, comments=&#39;#&#39;, delimiter=None, converters=None, skiprows=0, usecols=None, unpack=False, ndmin=0, encoding=&#39;bytes&#39;, max_rows=None)
    Load data from a text file.
    
    Each row in the text file must have the same number of values.
    
    Parameters
    ----------
    fname : file, str, or pathlib.Path
        File, filename, or generator to read.  If the filename extension is
        ``.gz`` or ``.bz2``, the file is first decompressed. Note that
        generators should return byte strings.
    dtype : data-type, optional
        Data-type of the resulting array; default: float.  If this is a
        structured data-type, the resulting array will be 1-dimensional, and
        each row will be interpreted as an element of the array.  In this
        case, the number of columns used must match the number of fields in
        the data-type.
    comments : str or sequence of str, optional
        The characters or list of characters used to indicate the start of a
        comment. None implies no comments. For backwards compatibility, byte
        strings will be decoded as &#39;latin1&#39;. The default is &#39;#&#39;.
    delimiter : str, optional
        The string used to separate values. For backwards compatibility, byte
        strings will be decoded as &#39;latin1&#39;. The default is whitespace.
    converters : dict, optional
        A dictionary mapping column number to a function that will parse the
        column string into the desired value.  E.g., if column 0 is a date
        string: ``converters = {0: datestr2num}``.  Converters can also be
        used to provide a default value for missing data (but see also
        `genfromtxt`): ``converters = {3: lambda s: float(s.strip() or 0)}``.
        Default: None.
    skiprows : int, optional
        Skip the first `skiprows` lines, including comments; default: 0.
    usecols : int or sequence, optional
        Which columns to read, with 0 being the first. For example,
        ``usecols = (1,4,5)`` will extract the 2nd, 5th and 6th columns.
        The default, None, results in all columns being read.
    
        .. versionchanged:: 1.11.0
            When a single column has to be read it is possible to use
            an integer instead of a tuple. E.g ``usecols = 3`` reads the
            fourth column the same way as ``usecols = (3,)`` would.
    unpack : bool, optional
        If True, the returned array is transposed, so that arguments may be
        unpacked using ``x, y, z = loadtxt(...)``.  When used with a structured
        data-type, arrays are returned for each field.  Default is False.
    ndmin : int, optional
        The returned array will have at least `ndmin` dimensions.
        Otherwise mono-dimensional axes will be squeezed.
        Legal values: 0 (default), 1 or 2.
    
        .. versionadded:: 1.6.0
    encoding : str, optional
        Encoding used to decode the inputfile. Does not apply to input streams.
        The special value &#39;bytes&#39; enables backward compatibility workarounds
        that ensures you receive byte arrays as results if possible and passes
        &#39;latin1&#39; encoded strings to converters. Override this value to receive
        unicode arrays and pass strings as input to converters.  If set to None
        the system default is used. The default value is &#39;bytes&#39;.
    
        .. versionadded:: 1.14.0
    max_rows : int, optional
        Read `max_rows` lines of content after `skiprows` lines. The default
        is to read all the lines.
    
        .. versionadded:: 1.16.0
    
    Returns
    -------
    out : ndarray
        Data read from the text file.
    
    See Also
    --------
    load, fromstring, fromregex
    genfromtxt : Load data with missing values handled as specified.
    scipy.io.loadmat : reads MATLAB data files
    
    Notes
    -----
    This function aims to be a fast reader for simply formatted files.  The
    `genfromtxt` function provides more sophisticated handling of, e.g.,
    lines with missing values.
    
    .. versionadded:: 1.10.0
    
    The strings produced by the Python float.hex method can be used as
    input for floats.
    
    Examples
    --------
    &gt;&gt;&gt; from io import StringIO   # StringIO behaves like a file object
    &gt;&gt;&gt; c = StringIO(u&quot;0 1\n2 3&quot;)
    &gt;&gt;&gt; np.loadtxt(c)
    array([[0., 1.],
           [2., 3.]])
    
    &gt;&gt;&gt; d = StringIO(u&quot;M 21 72\nF 35 58&quot;)
    &gt;&gt;&gt; np.loadtxt(d, dtype={&#39;names&#39;: (&#39;gender&#39;, &#39;age&#39;, &#39;weight&#39;),
    ...                      &#39;formats&#39;: (&#39;S1&#39;, &#39;i4&#39;, &#39;f4&#39;)})
    array([(b&#39;M&#39;, 21, 72.), (b&#39;F&#39;, 35, 58.)],
          dtype=[(&#39;gender&#39;, &#39;S1&#39;), (&#39;age&#39;, &#39;&lt;i4&#39;), (&#39;weight&#39;, &#39;&lt;f4&#39;)])
    
    &gt;&gt;&gt; c = StringIO(u&quot;1,0,2\n3,0,4&quot;)
    &gt;&gt;&gt; x, y = np.loadtxt(c, delimiter=&#39;,&#39;, usecols=(0, 2), unpack=True)
    &gt;&gt;&gt; x
    array([1., 3.])
    &gt;&gt;&gt; y
    array([2., 4.])</code></pre>
<p>Or really, <a href="http://letmegooglethat.com/?q=numpy+loadtxt">search</a> the function! Online documentation and discussion boards are filled with great content.</p>
</div>
<div id="exploring-your-data" class="section level3">
<h3>Exploring your data</h3>
<p>It is often a good idea to look at the data to have some idea of what you are working with</p>
<pre class="python"><code>#What does the data look like. Print it out
print(chemdata)</code></pre>
<pre><code>[[ 3.92583e+01 -1.14992e+02  1.11000e+02  1.96000e+04]
 [ 3.92583e+01 -1.14992e+02  1.11000e+02  1.57000e+04]
 [ 4.12060e+01 -1.17272e+02  1.05000e+02  3.00000e+00]
 ...
 [ 2.00530e+01  1.17419e+02  0.00000e+00  3.00000e+01]
 [ 2.00530e+01  1.17419e+02  0.00000e+00  3.30000e+01]
 [ 2.00530e+01  1.17419e+02  0.00000e+00  3.50000e+01]]</code></pre>
<p>This data is in the style: <strong>Latitude (degrees), Longitude (degrees -180:180), Age (Ma), Copper abundance (ppm)</strong></p>
<pre class="python"><code>#Print the dimensions of the data
print(chemdata.shape)</code></pre>
<pre><code>(207431, 4)</code></pre>
<p>207431 rows!</p>
</div>
<div id="accessing-data-from-an-array" class="section level3">
<h3>Accessing data from an array</h3>
<p>chemdata is a table of data: an array with two dimensions. So to access/look at/change parts of it, we need to specify both row and column</p>
<pre class="python"><code>#Print the number in the first row and third column 
#(note indexing is different in &quot;numpy arrays&quot; compared &quot;python lists&quot;. 
#IMPORTANT: Python counts from 0
print(chemdata[0,2])</code></pre>
<pre><code>111.0</code></pre>
<pre class="python"><code>#Print the first row
print(chemdata[0,:])</code></pre>
<pre><code>[   39.2583  -114.992    111.     19600.    ]</code></pre>
<pre class="python"><code>#Print the third column
print(chemdata[:,2])</code></pre>
<pre><code>[111. 111. 105. ...   0.   0.   0.]</code></pre>
<pre class="python"><code>#Print the first two columns for row id 2, 5 and 6. 
print(chemdata[[2,5,6],0:2])</code></pre>
<pre><code>[[  41.206 -117.272]
 [  41.186 -117.417]
 [  41.177 -117.485]]</code></pre>
</div>
<div id="challenge-1" class="section level3 challenge">
<h3>Challenge</h3>
<p>Print the second and third columns for row 20-30.</p>
<details>
<summary>
Solution
</summary>
<pre class="python"><code>#The indexing counts from [start:end]
#where &quot;start&quot; is included and &quot;end&quot; is excluded!
#Assuming we want row 30, then you need to
#include index 29 (i.e. set the end index to 30!)
#Same with columns, we want column 2 (index 1) and
#column 3 (index 2) so make our slice 1:3

print(chemdata[19:30,1:3])</code></pre>
</details>
</div>
<div id="plotting-data" class="section level3">
<h3>Plotting data</h3>
<p>Now to make our first plot!</p>
<pre class="python"><code>#Plot the lats and lons, i.e. the first column vs the second column
plt.plot(chemdata[:,1],chemdata[:,0],&#39;k.&#39;)
plt.title(&#39;Copper Deposit Data&#39;)
plt.ylabel(&#39;Latitude&#39;)
plt.xlabel(&#39;Longitude&#39;)
plt.show()</code></pre>
<div class="figure">
<img src="01a-fundamentals_files/01a-fundamentals_45_0.png" alt="" />
<p class="caption">png</p>
</div>
<p>This does not look right… It is a messy dataset! This is not uncommon. Maybe the Lats/Lons are stored as Norhtings/Eastings for some samples? Maybe they are missing a decimal place?</p>
<p>Anyway, Python is a great tool to clean things up! Let’s investigate further.</p>
<pre class="python"><code>#Plot the Latitudes
plt.plot(chemdata[:,0])
plt.ylabel(&#39;Latitude&#39;)
plt.xlabel(&#39;Number&#39;)
plt.show()

#Plot the Longitudes
plt.plot(chemdata[:,1],&#39;r&#39;)
plt.ylabel(&#39;Longitude&#39;)
plt.xlabel(&#39;Number&#39;)
plt.show()</code></pre>
<div class="figure">
<img src="01a-fundamentals_files/01a-fundamentals_47_0.png" alt="" />
<p class="caption">png</p>
</div>
<div class="figure">
<img src="01a-fundamentals_files/01a-fundamentals_47_1.png" alt="" />
<p class="caption">png</p>
</div>
<p>This kind of casual data interrogation is a really handy way to exploring your data. There are definitely some outliers with latitudes and longitudes. There are quite a few ways clean the data, but let’s simply restrict our data range to -180:180 and -90:90.</p>
<pre class="python"><code>#Clean up the data, remove anything outside lat lon extent

#Find all the &quot;chemdata&quot; column 1 (i.e. longitude) data points that are greater than -180, save it in a new variable
where_longitude_above_min = chemdata[:,1]&gt;-180
cudata=chemdata[where_longitude_above_min]

#Repeat for less than 180
where_longitude_below_max = cudata[:,1]&lt;180
cudata2=cudata[where_longitude_below_max]</code></pre>
<p>We can make that a little clearer now for the latitude values to see what is actually going on, by stepping through each part of the variable assignment…</p>
<pre class="python"><code>goodlat=cudata2[:,0]&lt;90
print(goodlat)</code></pre>
<pre><code>[ True  True  True ...  True  True  True]</code></pre>
<pre class="python"><code>goodlat.shape</code></pre>
<pre><code>(207422,)</code></pre>
<pre class="python"><code>cudata2</code></pre>
<pre><code>array([[ 3.92583e+01, -1.14992e+02,  1.11000e+02,  1.96000e+04],
       [ 3.92583e+01, -1.14992e+02,  1.11000e+02,  1.57000e+04],
       [ 4.12060e+01, -1.17272e+02,  1.05000e+02,  3.00000e+00],
       ...,
       [ 2.00530e+01,  1.17419e+02,  0.00000e+00,  3.00000e+01],
       [ 2.00530e+01,  1.17419e+02,  0.00000e+00,  3.30000e+01],
       [ 2.00530e+01,  1.17419e+02,  0.00000e+00,  3.50000e+01]])</code></pre>
<pre class="python"><code>#Repeat for latitudes less than 90
cudata3=cudata2[cudata2[:,0]&lt;90]
#Repeat for greater than -90
cudata4=cudata3[cudata3[:,0]&gt;-90]

print(&quot;We have removed&quot;, chemdata.shape[0]-cudata4.shape[0], &quot;samples&quot;)</code></pre>
<pre><code>We have removed 47 samples</code></pre>
<pre class="python"><code>plt.plot(cudata4[:,1],cudata4[:,0],&#39;k.&#39;)
plt.title(&#39;Copper Deposits from EarthChem.org&#39;)
plt.ylabel(&#39;Latitude&#39;)
plt.xlabel(&#39;Longitude&#39;)
plt.show()</code></pre>
<div class="figure">
<img src="01a-fundamentals_files/01a-fundamentals_55_0.png" alt="" />
<p class="caption">png</p>
</div>
<p>Now make a more informative plot:</p>
<pre class="python"><code>#Set reasonable variable names
lats=cudata4[:,0]
longs=cudata4[:,1]
age=cudata4[:,2]
copper=cudata4[:,3]

#lats_rich=lats[copper&gt;2]

fig = plt.figure(figsize=(6,4),dpi=150)

#Restrict the colour range between 0 and 100 (ppm?)
plt.scatter(longs,lats,s=age/1000,c=copper,vmin=0, vmax=100,cmap=plt.cm.copper)
plt.title(&#39;Copper Deposits from EarthChem.org&#39;)
plt.ylabel(&#39;Latitude&#39;)
plt.xlabel(&#39;Longitude&#39;)
plt.show()</code></pre>
<div class="figure">
<img src="01a-fundamentals_files/01a-fundamentals_57_0.png" alt="" />
<p class="caption">png</p>
</div>
<pre class="python"><code>#You could come up with a more intelligent way to reject your outliers, e.g.
import numpy as np
def reject_outliers(data):
    m = 2
    u = np.mean(data)
    print(&quot;mean is:&quot;, u)
    s = np.std(data)
    print(&quot;std is:&quot;, s)
    filtered = [e for e in data if (u - 2 * s &lt; e &lt; u + 2 * s)]
    print(&quot;removed:&quot;,np.shape(data)[0] - np.shape(filtered)[0])
    return(filtered)

filtered_age=reject_outliers(copper)
</code></pre>
<pre><code>mean is: 408.55060226439844
std is: 6032.1541529827555
removed: 1163</code></pre>
<p>Just plotting the Cu content implies that better filtering could be applied (a homework exercise perhaps). Remember this is a pretty messy dataset, some Cu is reported as ppm, ppb, or %!</p>
<pre class="python"><code>plt.plot(copper[copper&gt;1],&#39;k.&#39;)
plt.show()</code></pre>
<div class="figure">
<img src="01a-fundamentals_files/01a-fundamentals_60_0.png" alt="" />
<p class="caption">png</p>
</div>
</div>
<div id="lets-make-an-even-nicer-map" class="section level3">
<h3>Let’s make an even nicer map</h3>
<pre class="python"><code>#Import another module called Cartopy - great for plotting things on globes
import cartopy.crs as ccrs

#Make new variables from our array (so it is easier to see what we are doing)
lats=cudata4[:,0]
longs=cudata4[:,1]
age=cudata4[:,2]

#######
## Make the figure
#######

#Create a figure object
fig = plt.figure(figsize=(12,8),dpi=150)

#Make a map projection to plot on.
ax = plt.axes(projection=ccrs.Robinson())

#Add some Earth-specific details (from the cartopy package)
ax.set_global()
ax.coastlines(&#39;50m&#39;, linewidth=0.8)
ax.stock_img()
ax.gridlines()

#Make a scatter plot of the data coloured by age. 
#Restrict the colour range between 0 and 100 (Ma)
#And also set the scatter plot as a variable &#39;mapscat&#39; so we can reference it later
mapscat=ax.scatter(longs,lats,marker=&quot;.&quot;,s=0.5,c=age,vmin=0,vmax=100,transform=ccrs.PlateCarree(),zorder=4,cmap=plt.cm.hsv)

#Make a Colorbar
cbar=plt.colorbar(mapscat, ax=ax, orientation=&quot;horizontal&quot;, pad=0.05, fraction=0.15, shrink=0.5,extend=&#39;max&#39;)
cbar.set_label(&#39;Age (Ma)&#39;)

# Add a map title, and tell the figure to appear on screen
plt.title(&#39;Age of Copper Deposits in the EarthChem.org database&#39;)
plt.show()</code></pre>
<div class="figure">
<img src="01a-fundamentals_files/01a-fundamentals_62_0.png" alt="" />
<p class="caption">png</p>
</div>
<p>You can explore the different color maps at <a href="https://matplotlib.org/3.1.0/tutorials/colors/colormaps.html">https://matplotlib.org/3.1.0/tutorials/colors/colormaps.html</a>.</p>
</div>
<div id="challenge-2" class="section level3 challenge">
<h3>Challenge</h3>
<ul>
<li>Pick a new element from the EarthChem data and make a similar map.</li>
<li><a href="https://www.dropbox.com/sh/b1tkoi6k1xmmcka/AADmxEMNwTbv1DZHifMOWzzPa?dl=0">Here is a link</a> to download the data for indiviual elements</li>
<li>Create a new notebook and display the diagnostic steps leading up to your final map.</li>
</ul>
<details>
<summary>
Solution
</summary>
<pre class="python"><code>#We only need numpy and plotting libraries
import numpy
import matplotlib.pyplot as plt 
import cartopy.crs as ccrs

#Set the correct filename/filepath to where you have downloaded the data
filename = &#39;../data/EarthChemAG.txt&#39;

#Add the &quot;skiprows&quot; flag, because this data has a header row
chemdata=numpy.loadtxt(filename, delimiter=&#39;,&#39;,skiprows=1)
    
#Set some variable names
lats=chemdata[:,0]
longs=chemdata[:,1]
age=chemdata[:,3]
silver=chemdata[:,2]
    
#Do a quick plot
plt.plot(longs,lats,&#39;b.&#39;)

#This set actually looks fine, no filtering necessary!
#Just make the final plot again, with a new color bar
plt.scatter(longs,lats,s=age/10,c=silver,vmin=0, vmax=1000,cmap=plt.cm.twilight)
plt.title(&#39;Silver Deposits from EarthChem.org&#39;)
plt.ylabel(&#39;Latitude&#39;)
plt.xlabel(&#39;Longitude&#39;)
plt.show()</code></pre>
</details>
</div>
<div id="key-points" class="section level3 keypoints">
<h3>Key points</h3>
<ul>
<li>You can store things in python in variables</li>
<li>Lists can be used to store objects of different types</li>
<li>Loops with for can be used to iterate over each object in a list</li>
<li>Functions are used to write (and debug) repetitive code once</li>
<li>Indexing</li>
</ul>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
